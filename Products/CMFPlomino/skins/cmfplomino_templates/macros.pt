<tal:section metal:define-macro="showlabel"
    tal:define="titleaslabel options/field/TitleAsLabel;
        mandatory python: 'mandatory' if options['field'].getMandatory() else '';
        dataMandatory python: 'data-mandatory' if 'data-mandatory' in options['field'].HTMLAttributesFormula() else '';
        widget python:options['field'].getSettings('widget')">
    <tal:label tal:condition="python: titleaslabel and widget!='HIDDEN'">
        <label class = "control-label"
            tal:attributes="for options/fieldname">
            <span tal:define="label options/field/title"
                tal:content="label">Here will go the label</span>
        <span tal:condition="python: (mandatory or dataMandatory)  and context.REQUEST.PARENTS[0].isEditMode()"
            title="Obbligatorio"
            tal:define="titles python: {'mandatory': 'Obbligatorio', 'data-mandatory': 'Obbligatorio per l\'invio'}"
            tal:attributes="class python: mandatory or dataMandatory;
                title python: titles.get(mandatory) or titles.get(dataMandatory)">â– </span></label>
    </tal:label>
</tal:section>
