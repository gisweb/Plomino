<tal:label metal:use-macro="here/macros/macros/showlabel" >
    display the field title as label
</tal:label>
<tal:break tal:define="multiple python:options['field'].getSettings('type')=='MULTI'"
    tal:condition="multiple">
    <br />
</tal:break>
<tal:block tal:define="attachments options/fieldvalue;
					filenames attachments/keys|nothing" 
	tal:repeat="attachment filenames">
	<tal:block tal:define="contenttype python:attachments[attachment]">
		<a tal:condition="python:not(contenttype.startswith('image'))" href="#" tal:attributes="href python:'getfile?filename='+attachment" tal:content="attachment">filename</a>
		<a tal:condition="python:contenttype.startswith('image')" href="#" tal:attributes="href python:'getfile?filename='+attachment">
			<img tal:attributes="src python:'getfile?filename='+attachment" /></a>
		<br/>
	</tal:block>
</tal:block>